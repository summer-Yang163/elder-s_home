<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.elder.mapper.OldManMapper">

    <select id="select" resultType="com.elder.pojo.OldMan">
        select * from oldMan where 1=1
               <if test="old_id != null"> and old_id=#{old_id}</if>

               <if test="name != null"> and name=#{name}</if>

               <if test="user_id != null"> and user_id=#{user_id}</if>

               <if test="gender != null"> and gender=#{gender}</if>

               <if test="relationship != null"> and relationship=#{relationship}</if>

               <if test="phone != null"> and phone=#{phone}</if>

               <if test="em_contact != null"> and em_contact=#{em_contact}</if>

               <if test="em_phone != null"> and em_phone=#{em_phone}</if>

            </select>

    <insert id="add">
        intsert into oldMan
        <trim prefix="(" suffix=")" suffixOverrides=",">
                  <if test="old_id != null"> old_id,</if>

                  <if test="name != null"> name,</if>

                  <if test="user_id != null"> user_id,</if>

                  <if test="gender != null"> gender,</if>

                  <if test="relationship != null"> relationship,</if>

                  <if test="phone != null"> phone,</if>

                  <if test="em_contact != null"> em_contact,</if>

                  <if test="em_phone != null"> em_phone,</if>

                    </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">#{$column.name}</trim>

    </insert>

    <update id="update">
        update oldMan set
        <trim prefix=" " suffix=" " suffixOverrides=",">
                                                               <if test="name != null"> name=#{name},</if>

                                                   <if test="user_id != null"> user_id=#{user_id},</if>

                                                   <if test="gender != null"> gender=#{gender},</if>

                                                   <if test="relationship != null"> relationship=#{relationship},</if>

                                                   <if test="phone != null"> phone=#{phone},</if>

                                                   <if test="em_contact != null"> em_contact=#{em_contact},</if>

                                                   <if test="em_phone != null"> em_phone=#{em_phone},</if>

                                    </trim>
        where old_id=#{old_id}
    </update>

    <update id="delete">
        delete from oldMan where old_id=#{old_id}
    </update>
</mapper>